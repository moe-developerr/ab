!function(){angular.module("app",["ngRoute","jcs-autoValidate","angular-ladda","ngFileUpload"])}(),function(){function e(e,t,o){o.interceptors.push("authInterceptor"),t.html5Mode(!0),e.when("/register",{templateUrl:"app/auth/register.html",controller:"RegisterController",controllerAs:"vm"}).when("/login",{templateUrl:"app/auth/login.html",controller:"LoginController",controllerAs:"vm"}).when("/forgot-password",{templateUrl:"app/auth/password/forgot-password.html",controller:"ForgotPasswordController",controllerAs:"vm"}).when("/update-password",{templateUrl:"app/auth/password/update-password.html",controller:"UpdatePasswordController",controllerAs:"vm"}).when("/profile",{templateUrl:"app/profile/profile.html",controller:"ProfileController",controllerAs:"vm",isRestricted:!0}).when("/jobs",{templateUrl:"app/jobs/jobs-listing.html",controller:"JobsListingController",controllerAs:"vm"}).when("/job/:id",{templateUrl:"app/jobs/job.html",controller:"JobController",controllerAs:"vm"}).otherwise({redirectTo:"login"})}angular.module("app").config(["$routeProvider","$locationProvider","$httpProvider",e])}(),function(){function e(e,t,o,n){function r(e,t){t.isRestricted&&!o.get("isLoggedIn")&&(e.preventDefault(),n.path("/login"))}t.$on("$routeChangeStart",r),e.getErrorMessages().then(function(e){e.myCustomError="My custom error message",e.anotherErrorMessage="An error message with the attribute value {0}"})}angular.module("app").run(["defaultErrorMessageResolver","$rootScope","localStorage","$location",e])}(),function(){function e(e,t){function o(){n.submitting=!0,e.authenticate(n.model).then(function(e){n.submitting=!1,n.model={},document.getElementById("reset").click(),e===!0?t.path("/jobs"):n.response=e})}var n=this;n.model={},n.submitting=!1,n.loginUser=o,n.response=""}angular.module("app").controller("LoginController",e),e.$inject=["authFactory","$location"]}(),function(){function e(e){function t(){o.submitting=!0,e.request({method:"post",url:"api/UserAccounts.php",data:o.model}).then(function(e){o.submitting=!1,o.response=e,o.model={},document.getElementById("reset").click()})}var o=this;o.model={},o.submitting=!1,o.response="",o.registerUser=t}angular.module("app").controller("RegisterController",e),e.$inject=["requestFactory"]}(),function(){function e(e){function t(t){return t===e.path().substring(1)}var o=this;o.isActive=t}angular.module("app").controller("NavController",e),e.$inject=["$location"]}(),function(){function e(e,t){function o(){n()}function n(){return e.request({method:"get",url:"api/GetJob.php",params:{id:t.id}}).then(function(e){s.job=e})}function r(){return e.request({method:"get",url:"api/ApplyJob.php",params:{jobVacId:t.id}}).then(function(e){s.shareResponse="",s.applyResponse=e})}function a(){return e.request({method:"get",url:"api/ShareJob.php",params:{jobVacId:t.id,from:"Moe",to:s.shareModel.email,message:s.shareModel.message}}).then(function(e){s.applyResponse="",s.shareResponse=e})}var s=this;s.job={},s.applyResponse="",s.shareResponse="",s.shareModel={},s.applyModel={},s.share=a,s.apply=r,o()}angular.module("app").controller("JobController",e),e.$inject=["requestFactory","$routeParams"]}(),function(){function e(e){function t(){o()}function o(){return e.request({method:"get",url:"api/Jobs.php"}).then(function(e){n.jobs=e})}var n=this;n.search="",n.jobs=[],t()}angular.module("app").controller("JobsListingController",e),e.$inject=["requestFactory"]}(),function(){function e(e,t){function o(){u(),s(),l(),r(),a()}function n(){t.upload({url:"api/UploadCV.php",data:p.cv}).then(function(e){p.cvResponse=e.data},function(e){p.cvResponse=e.statusText},function(e){})}function r(){return e.request({method:"get",url:"api/GetDegrees.php"}).then(function(e){p.listOfDegrees=e})}function a(){p.degrees.push({degree:"",major:""})}function s(){return e.request({method:"get",url:"api/GetCountries.php"}).then(function(e){p.listOfCountries=e})}function l(){p.personalAddresses.push({country:"",city:""})}function u(){var e=document.querySelector(".nav-tabs");e.addEventListener?e.addEventListener("click",c):e.attachEvent&&e.attachEvent("onclick",c)}function i(){return e.request({method:"post",url:"api/SaveProfile.php",data:p.model}).then(function(e){p.response=e})}function c(e){e.preventDefault();var t=this.querySelectorAll(".active")[0],o=document.querySelector(".tab-pane.active");t.className=t.className.replace(/\bactive\b/,""),e.target.parentNode.className+=" active",o.className=o.className.replace(/\bactive\b/,""),document.querySelector(e.target.getAttribute("href")).className+=" active"}var p=this;p.model={},p.response="",p.save=i,p.listOfCountries=[],p.personalAddresses=[],p.addAddress=l,p.listOfDegrees=[],p.degrees=[],p.addDegree=a,p.cv={},p.cvResponse="",p.uploadCV=n,o()}angular.module("app").controller("ProfileController",e),e.$inject=["requestFactory","Upload"]}(),function(){function e(e,t,o,n){function r(e){return e.headers=e.headers||{},o.get("token")?(e.headers.Authorization=o.get("token"),console.log("token exist")):console.log("no token"),e}function a(e){return 401===e.status,e||t.when(e)}return{request:r,response:a}}angular.module("app").factory("authInterceptor",e),e.$inject=["$rootScope","$q","localStorage","$location"]}(),function(){function e(e,t){function o(o){function n(e){return t.set("token",e.data),t.set("name","Moe"),t.set("isLoggedIn",!0),!0}function r(e){return t.remove("token"),t.remove("name"),t.remove("isLoggedIn"),e.statusText}return e.post("api/Authorize.php",o).then(n).catch(r)}return{authenticate:o}}angular.module("app").factory("authFactory",e),e.$inject=["$http","localStorage"]}(),function(){function e(e){function t(t,o){e.localStorage.setItem(t,o)}function o(t){return e.localStorage.getItem(t)||!1}function n(t){e.localStorage.removeItem(t)}return{set:t,get:o,remove:n}}angular.module("app").factory("localStorage",e),e.$inject=["$window"]}(),function(){function e(e){function t(t){function o(e){return e.data}function n(e){return e.statusText}return e(t).then(o).catch(n)}return{request:t}}angular.module("app").factory("requestFactory",e),e.$inject=["$http"]}(),function(){function e(e){function t(){o.submitting=!0,e.request({method:"post",url:"api/ForgotPassword.php",data:o.model}).then(function(e){o.submitting=!1,o.model={},document.getElementById("reset").click(),o.response=e.success})}var o=this;o.model={},o.response="",o.submitting=!1,o.sendEmail=t}angular.module("app").controller("ForgotPasswordController",e),e.$inject=["requestFactory"]}(),function(){function e(e){function t(){o.submitting=!0,e.request({method:"post",url:"api/ChangePassword.php",data:o.model}).then(function(e){o.submitting=!1,o.model={},document.getElementById("reset").click(),o.response=e.success})}var o=this;o.submitting=!1,o.response="",o.updatePassword=t}angular.module("app").controller("UpdatePasswordController",e),e.$inject=["requestFactory"]}();